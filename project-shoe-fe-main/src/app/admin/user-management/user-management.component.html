<div class="user-management-container">
  <div class="header flex justify-content-between">
    <div><h3>Danh sách người dùng</h3></div>
    <div><p-button icon="pi pi-plus" label="Thêm mới" [outlined]="true" (onClick)="goAddUser()"/></div>
  </div>
  <p-table
    [value]="users()"
    [tableStyle]="{ 'min-width': '60rem' }"
    class="p-datatable-gridlines p-datatable-sm"
    [rows]="rows()"
    [paginator]="true"
    [first]="first()"
    [rowsPerPageOptions]="rowsPerPageOptions"
    (onPage)="pageChange($event)"
    [totalRecords]="totalRecords()"
    [lazy]="true"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Tên người dùng</th>
        <th>Số điện thoại</th>
        <th>Email</th>
        <th>Địa chỉ</th>
        <th>Vai trò</th>
        <th>Trạng thái</th>
        <th>Hành động</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td>{{ user.first_name }} {{ user.last_name }}</td>
        <td>{{ user.phone_number || "" }}</td>
        <td>{{ user.email || "" }}</td>
        <td>{{ user.address || "" }}</td>
        <td>{{ user.admin ? 'Admin' : 'Người dùng' }}</td>
        <td>{{ user.active ? 'Đang hoạt động' : 'Không hoạt động' }}</td>
        <td>
          @if (user.active) {
            <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" (onClick)="onEdit(user.id)"/>
            <p-button
            icon="pi pi-lock"
            [rounded]="true"
            [text]="true"
            severity="danger"
            (onClick)="deActiveUser(user.id)"
          />
          }
          @else {
            <p-button
            icon="pi pi-unlock"
            [rounded]="true"
            [text]="true"
            severity="success"
            (onClick)="activeUser(user.id)"
          />
          }
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
