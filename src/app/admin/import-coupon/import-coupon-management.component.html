<div class="flex justify-content-between">
  <div>
    <h3>Danh sách phiếu nhập</h3>
  </div>
  <div>
    <p-button
      icon="pi pi-plus"
      label="Thêm mới"
      [outlined]="true"
      (onClick)="goAdd()"
    />
  </div>
</div>
<p-table
  [value]="coupons()"
  [tableStyle]="{ 'min-width': '60rem' }"
  [rows]="rows()"
  [paginator]="true"
  [first]="first()"
  [rowsPerPageOptions]="[10, 25, 50]"
  (onPage)="pageChange($event)"
  [lazy]="true"
  [totalRecords]="totalRecords()"
>
  <ng-template pTemplate="header">
    <tr>
      <th class="text-center" style="width: 70px" class="text-center">STT</th>
      <th class="text-center">Mã phiếu nhập</th>
      <th class="text-center">Người lập phiếu</th>
      <th class="text-center">Người chốt phiếu</th>
      <th class="text-center">Ngày lập</th>
      <th class="text-center">Ngày chốt</th>
      <th class="text-center">Trạng thái</th>
      <th class="text-center" style="width: 180px">Hành động</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
    <tr [class.isSuccess]="item.status === 2">
      <td>{{ rowIndex + 1 }}</td>
      <td>{{ item.id }}</td>
      <td>{{ item.created_by }}</td>
      <td>{{ item.confirm_by  }}</td>
      <td>{{ item.created_date | date : "dd-MM-yyyy" }}</td>
      <td>{{ item.imported_time | date : "dd-MM-yyyy" }}</td>
      <td class="text-center">
        {{ item.status === 1 ? "Hoàn thành" : "Chưa hoàn thành" }}
      </td>
      <td class="text-center">
        <!-- @if (item.status === 1) {
          <p-button icon="pi pi-check" [rounded]="true" [text]="true" />
          <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" />
          <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="danger" />
        } -->
        @if (item.status === 0) {
          <p-button icon="pi pi-check" [rounded]="true" [text]="true" (onClick)="confirmCoupon(item.id)"/>
        }
        <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" (onClick)="onEdit(item.id)"/>
        @if (item.status === 0) {
          <p-button
          icon="pi pi-trash"
          [rounded]="true"
          [text]="true"
          severity="danger"
          (onClick)="onDelete(item.id)"
        />
        }
      </td>
    </tr>
  </ng-template>
</p-table>
